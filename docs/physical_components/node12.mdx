---
title: 'Node 12: Voice-Based Assistant'
description: Facilitates voice-activated control of devices, enhancing user interaction and accessibility in smart environments.
---

import nodeImage from '@site/static/img/node12/Voice.jpg';
import teensy from '@site/static/img/components_images/Teensy_41.png';
import teensy2 from '@site/static/img/components_images/Teensy_41_2.png';
import esp8266Module from '@site/static/img/components_images/ESP8266Module.png';
import max4466 from '@site/static/img/components_images/MAX4466.jpg';
import yellowLED from '@site/static/img/components_images/Yellow_LED.jpg';
import yellowTactile from '@site/static/img/components_images/Push_Button_Yellow.jpg';
import relay from '@site/static/img/components_images/Relay.jpg';
import fan from '@site/static/img/components_images/Cooling-Fan.png';
import PinConnectionsTable from '@site/src/pages/PinConnectionsTable.js';
import circuitDiagram from '@site/static/img/node12/Voice-Based-Assistance_Circuit_Diagram.ino_bb.png';

# Node 12: Voice-Based Assistant

The Voice-Based Assistant, integrates a Teensy 4.1 with an ESP8266 module and a MAX4466 microphone amplifier to create a voice-activated system that enhances user interaction with devices through simple spoken commands. Ideal for smart home systems and interactive kiosks, this node simplifies operations and accessibility, offering a hands-free method to control and automate environment interactions.

<img src={nodeImage} 
alt="Voice-Based Assistant" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto' }} />

## Components Summary

<div style={{ display: 'flex', justifyContent: 'center', margin: '20px' }}>
  <table style={{ width: '75%', borderCollapse: 'collapse' }}>
    <thead>
      <tr>
        <th style={{ padding: '8px', width: '30%', textAlign: 'center' }}>Component Type</th>
        <th style={{ padding: '8px', width: '70%', textAlign: 'center' }}>Component Name</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Controller</td>
        <td style={{ padding: '8px' }}>
          <a href="#controller-teensy-41">Teensy 4.1</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Communication Module</td>
        <td style={{ padding: '8px' }}>
          <a href="#communication-module-esp-01-esp8266">ESP-01 ESP8266 Serial WIFI Wireless Transceiver Module</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Sensor</td>
        <td style={{ padding: '8px' }}>
          <a href="#sensor-max4466-electret-microphone-amplifier">MAX4466 Electret Microphone Amplifier</a>
        </td>
      </tr>
      <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#sensor-momentary-tactile-push-button">Momentary Tactile Push Button</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Actuator</td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-led">Yellow LED</a>
        </td>
      </tr>
      <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-relay">Relay</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}></td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-dc-fan">DC Fan</a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

## Components Overview

### Controller: Teensy 4.1

The Teensy 4.1 is a high-performance microcontroller development board designed for demanding applications requiring substantial processing power. Equipped with a 600 MHz ARM Cortex-M7 processor, it excels in a variety of tasks ranging from robotics and audio processing to high-speed data acquisition and real-time control systems. Its Arduino IDE compatibility ensures accessibility for developers, while its extensive set of features, including numerous I/O pins, multiple communication interfaces, and advanced hardware support for USB host functionality and SD card storage, make it ideal for complex, feature-rich embedded applications. The compact size and low power consumption of the Teensy 4.1 also make it highly suitable for IoT, multimedia, and control applications where space and energy efficiency are crucial.

<img src={teensy} 
alt="Teensy 4.1" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto',
    }} />
<img src={teensy2} 
alt="Teensy 4.1 - Back" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto',
    }} />

#### Technical Specifications and Features
- **Processor**: ARM Cortex-M7 at 600 MHz
- **Memory**:
  - 7936K Flash
  - 1024K RAM (512K tightly coupled)
  - 4K EEPROM (emulated)
- **Communication Interfaces**:
  - USB device at 480 Mbit/sec & USB host at 480 Mbit/sec
  - 55 digital I/O pins, 35 PWM output pins
  - 18 analog input pins
  - 8 serial ports, 3 SPI ports, 3 I2C ports
  - 2 I2S/TDM, 1 S/PDIF digital audio port
  - 3 CAN Bus (1 with CAN FD)
  - 1 SDIO 4-bit native SD Card port
  - Ethernet 10/100 Mbit with DP83825 PHY
- **Additional Features**:
  - QSPI memory expansion, locations for 2 extra RAM or Flash chips
  - 32 general-purpose DMA channels
  - Cryptographic Acceleration & Random Number Generator
  - Real Time Clock for date/time functions
  - Programmable FlexIO
  - Pixel Processing Pipeline
  - Peripheral cross triggering
  - Power On/Off management

#### References
- [Teensy 4.1 Datasheet](@site/static/datasheets/Teensy_4.1.pdf)
- [ARM Cortex-M7 Processor Technical Reference Manual](@site/static/datasheets/Arm_cortex-M7_Processor_Technical_Reference_Manual.pdf)
- [ARM v7-M Architecture Reference Manual](@site/static/datasheets/Arm_v7-M_Architecture_Reference_Manual.pdf)
- [IMXRT1060 Manual](@site/static/datasheets/i.MX_RT1060_Processor_Reference_Manual.pdf)
- [Teensy 4.1 Pinout](@site/static/datasheets/Teensy_4.1_Pinout.pdf)

### Communication Module: ESP-01 ESP8266

The ESP-01 module, powered by the ESP8266 microcontroller chip, is a highly popular and cost-effective solution for adding Wi-Fi connectivity to microcontroller projects. It enables devices to connect to Wi-Fi networks, facilitating communication with other devices and the internet. This module is renowned for its low cost and power efficiency, making it an ideal choice for Internet of Things (IoT) projects and various other embedded applications where basic Wi-Fi connectivity is required.

<img src={esp8266Module} 
alt="ESP8266 Module" 
style={{ 
    width: '25%', 
    display: 'block', 
    margin: '20px auto',
    transform: 'rotate(90deg)'
    }} />

#### Technical Specifications and Features
- **Wi-Fi Standards**: 802.11 b/g/n
- **Wi-Fi Features**:
  - Wi-Fi Direct (P2P), soft-AP
  - Integrated TCP/IP protocol stack
- **RF Performance**:
  - Integrated TR switch, balun, LNA, power amplifier, and matching network
  - +19.5dBm output power in 802.11b mode
- **Power Efficiency**:
  - Power down leakage current of < 10uA
  - Standby power consumption of < 1.0mW (DTIM3)
  - Wake up and transmit packets in < 2ms
- **Memory**: 4MB Flash Memory
- **Processing Capability**:
  - Integrated low-power 32-bit CPU could be used as an application processor
- **Interfaces**:
  - SDIO 1.1 / 2.0, SPI, UART
- **Advanced Features**:
  - STBC, 1×1 MIMO, 2×1 MIMO
  - A-MPDU & A-MSDU aggregation & 0.4ms guard interval

#### References
- [ESP01 ESP8266 Wi-Fi Module Datasheet](@site/static/datasheets/ESP8266ModuleV1.pdf)

### Sensor: MAX4466 Electret Microphone Amplifier

The MAX4466 Electret Microphone Amplifier is a compact and versatile electronic module designed to amplify the signal from an electret microphone. It features a low-noise amplifier with a wide gain range, making it ideal for capturing and boosting audio signals from microphones in various applications. The module typically operates on a low voltage, such as 3.3V or 5V, making it compatible with most microcontrollers and embedded systems. It offers the ability to adjust the gain to suit specific audio input requirements, allowing for precise control over the amplification level. This makes the MAX4466 amplifier module useful in applications like voice recording, sound detection, and audio processing, where a clean and amplified microphone signal is essential. Its small form factor and ease of integration make it a popular choice for projects involving sound sensing and processing.

<img src={max4466} 
alt="MAX4466 Module" 
style={{ 
    width: '60%', 
    display: 'block', 
    margin: '20px auto' }} />

#### Technical Specifications and Features:
- **Supply Voltage Operation:** +2.4V to +5.5V
- **Excellent Power-Supply Rejection Ratio:** 112dB
- **Excellent Common-Mode Rejection Ratio:** 126dB
- **High AVOL:** 125dB (RL = 100kΩ)
- **Rail-to-Rail Outputs**
- **Low Quiescent Supply Current:** 24μA
- **Gain Bandwidth Product:** 600kHz AV ≥ 5

#### References:
- [MAX4466 Datasheet](@site/static/datasheets/MAX4466.pdf)

### Sensor: Momentary Tactile Push Button

A momentary tactile push button is a fundamental electronic component used for temporary electrical connections in devices such as keyboards, remote controls, and control panels. It provides users with a tactile interface to trigger specific functions or actions by pressing and releasing the button. Known for their reliability and precision, these buttons offer tactile feedback or audible clicks upon activation. Available in various sizes and styles, they play a vital role in user interface design, enabling users to interact with electronic devices by initiating momentary electrical signals with a simple push.

<img src={yellowTactile} 
      alt="Tactile - Yellow" 
      style={{ 
        width: '25%', 
        display: 'block', 
        margin: '20px auto' }} />

#### Technical Specifications and Features
- **Function**: Push to ON, momentary action.
- **Switch Type**: Momentary.
- **Mounting Type**: Through-hole.
- **Contact Material**: Aluminum alloy.
- **Contact Resistance**: 50mΩ.
- **Insulation Resistance**: 100MΩ.
- **Operating Temperature Range**: -20°C to +70°C.
- **Operation Force**: Approximately 3-5N.
- **Operation Stroke**: 1.05mm.
- **Body Material**: Plastic.
- **Mechanical & Electrical Life**: 300,000 cycles.
- **Dimensions**: 
  - Length: 12mm.
  - Width: 12mm.
  - Height: 7.3mm.
  - Weight: 2gm.

#### References
- [Momentary Tactile Push Button Datasheet](@site/static/datasheets/Momentary_Tactile_Push_Button.pdf)

### Actuator: LED

LEDs, or Light Emitting Diodes, are semiconductor devices that emit light when an electric current is applied. Known for their energy efficiency, compact size, and long life, LEDs are extensively used across various applications including electronic devices, display panels, indicators, and general lighting. Their ability to be manufactured in various colors and sizes makes LEDs exceptionally versatile for design and functional purposes in numerous projects.

<img src={yellowLED} 
      alt="Yellow LED" 
      style={{ 
        width: '25%', 
        display: 'block', 
        margin: '20px auto'  }} />

#### Technical Specifications and Features
- **Dice Material**: Gallium Arsenide Phosphide on Gallium Phosphide (GaAsP on GaP/GaP).
- **Emitted Colors**: Available in Green and Red.
- **Lens Color**: Green Diffused and Red Diffused.
- **Peak Wavelength**:
  - Green: 568 nm
  - Red: 587 nm
- **Viewing Angle**: 45 degrees, offering focused illumination.
- **Luminous Intensity (IV)**:
  - Green: 15 mcd
  - Red: 14 mcd

#### References
- [Yellow LED Datasheet](@site/static/datasheets/Yellow_Green_LED.pdf)

### Actuator: Relay

<img src={relay} 
    alt="Relay" 
    style={{ 
        width: '60%', 
        display: 'block', 
        margin: '20px auto'  }} />

The 3V relay module is an electronic switch that operates at a low voltage of 3 volts, making it suitable for use in low-power circuits and microcontroller-based projects. It typically consists of a relay, driver circuitry, and input/output connectors. The relay serves as an electromechanical switch, capable of controlling higher voltage and current loads with a low-voltage signal. This module is commonly used to interface microcontrollers, Arduino boards, or other digital devices with appliances, lights, or other electrical loads. It simplifies the process of controlling high-power devices by allowing you to use a low-voltage signal to open or close the relay contacts, thereby turning the connected load on or off. The 3V relay module finds applications in home automation, robotics, and various electronic projects where remote or automated control of electrical devices is needed.

#### Technical Specifications and Features
- **Operate Voltage**: 3.3V-5V
- **Input Current**: 100mA
- **Rated Load**: 5A@250VAC, 5A@30VDC
- **Contact Resistance**: 50mΩ @6VDC 1A
- **Insulation Resistance**: 100MΩ 10ms Max.
- **Operation Time**: 10ms Max.
- **Release Time**: 5ms Max.
- **Input Interface**: Digital
- **Dimensions**: 42mm x 24mm x 18.5mm
- **Weight**: G.W 19g

#### References
- [Relay Datasheet](@site/static/datasheets/Relay.pdf)

### Actuator: DC Fan

A 5V DC fan is a compact and efficient cooling device powered by a 5-volt direct current (DC) source. It typically features a brushless motor design for quiet operation and longevity. These fans come in various sizes, including common dimensions like 80mm and 120mm, and are equipped with blades that circulate air to dissipate heat from electronic components or provide ventilation in various applications. Due to their low voltage requirements, 5V DC fans are often used in small electronics, such as laptops, Raspberry Pi projects, and electronic enclosures, to prevent overheating and maintain proper thermal management. They are also favored in portable and low-power setups, where they help maintain optimal operating temperatures without draining excessive power.

<img src={fan} 
alt="DC Fan" 
style={{ 
    width: '50%', 
    display: 'block', 
    margin: '20px auto' }} />

#### Technical Specifications and Features:
- **Operating Voltage:** 5V
- **Current:** 0.2 A
- **Type:** Brushless DC fan
- **Fan Dimensions:** 30mm x 30mm x 8mm
- **Wire Length:** 3.25" / 80mm
- **Weight:** 6.2g / 0.22oz
- **Mounting Screws & Nuts Included**

#### References:
- [DC Cooling Fan Datasheet](@site/static/datasheets/Cooling_Fan.pdf)

## Communication Protocols

### Controller Communication

The node employs two key communication protocols for seamless data exchange between its Teensy 4.1 microcontroller and the ThingsBoard server:

#### Wi-Fi Connection:
The Teensy 4.1 microcontroller establishes a secure connection to a local Wi-Fi network, enabling internet access. This Wi-Fi connection serves as the fundamental bridge for communication with external services, particularly the ThingsBoard server. The Wi-Fi connectivity forms the backbone of real-time data transmission and management.

#### MQTT Protocol:
The Message Queuing Telemetry Transport (MQTT) protocol is employed for transmitting data between the controller and the ThingsBoard server. MQTT is a lightweight and efficient protocol designed for remote devices with limited resources. It facilitates the publication of data (such as access events) from the controller to the server, as well as the subscription to commands or acknowledgements from the server. MQTT ensures secure and reliable communication, making it ideal for real-time data visualization and monitoring on the ThingsBoard dashboard. The controller publishes messages related to access events, which are then visualized on the dashboard, offering insights into the system's performance and access patterns.

### Sensor Communication

The core component of the node is the MAX4466 electret microphone, which facilitates the capture of voice input through analog data communication. The MAX4466 microphone generates analog signals corresponding to the variations in sound pressure levels. These analog signals are then transmitted to the Teensy 4.1 controller for further processing.

To enable efficient storage and analysis of the captured audio data, the Teensy 4.1 node is equipped with a built-in SD card module. This module provides a convenient means of storing audio data in digital format. Once the analog voice input is received from the MAX4466 microphone, the Teensy 4.1 controller converts this analog data into a digital format and stores it directly onto the SD card.

However, the true power of the node lies in its integration with external speech recognition services. The digitized audio data, once stored on the SD card, is extracted and transmitted to a remote speech recognition server. This communication is established over the User Datagram Protocol (UDP), a lightweight and efficient protocol ideal for real-time data transmission. The audio data is sent to the server, where sophisticated speech recognition algorithms analyze the content and convert it into text format.

The server responds by sending back the recognized text to the Teensy 4.1 node over the same UDP protocol. This converted text becomes the actionable command that controls the connected devices, such as the LED and DC fan, based on the user's initial voice input. This seamless integration of analog data capture, digital storage, and remote speech recognition exemplifies the node's adaptability and responsiveness in processing voice-based commands.

## Pin Connections
This section provides details about the pin connections between the components used in the node and the TEENSY 4.1 controller.

### ESP8266 Wi-Fi Module Pin Connections

<PinConnectionsTable
  data={[
    ["ESP8266 Wi-Fi Module", "", "TEENSY 4.1"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["TX", <span className="wire"><span className="wire-yellow"></span></span>, "RX1"],
    ["RX", <span className="wire"><span className="wire-green"></span></span>, "TX1"]
  ]}
/>

### MAX4466 Module Pin Connections

<PinConnectionsTable
  data={[
    ["MAX4466", "", "TEENSY 4.1"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["Signal Out", <span className="wire"><span className="wire-blue"></span></span>, "A0"]
  ]}
/>

### Tactile Switch Pin Connections

<PinConnectionsTable
  data={[
    ["Tact Switch", "", "TEENSY 4.1"],
    ["Leg-1", <span className="wire"><span className="wire-blue"></span></span>, "2"],
    ["Leg-3", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>

### Yellow LED Pin Connections

<PinConnectionsTable
  data={[
    ["Yellow LED", "", "TEENSY 4.1"],
    ["Anode (+)", <span className="wire"><span className="wire-blue"></span></span>, "3"],
    ["Cathode (-)", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>

### Fan Relay Module Pin Connections

<PinConnectionsTable
  data={[
    ["Fan Relay", "", "TEENSY 4.1"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["Signal In", <span className="wire"><span className="wire-blue"></span></span>, "4"]
  ]}
/>

## Circuit Diagram
<img src={circuitDiagram} 
alt="Circuit Diagram" 
style={{ 
    //maxWidth: '700px', 
    display: 'block', 
    margin: '20px auto' }} />

## Link to Code Explanation and Tutorial

For a comprehensive guide on programming this node, including detailed code explanations and step-by-step tutorials, please refer to the following link. This resource provides all necessary information to understand the functioning of the node, enabling users to effectively program and customize it according to their specific requirements.

[Visit the Node Programming Guide and Code Explanation](/docs/tutorial/node_code_explained.mdx)
