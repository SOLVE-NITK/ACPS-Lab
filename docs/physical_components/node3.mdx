---
title: 'Node 3: Energy Management System'
description: Monitors and controls energy consumption to optimize efficiency and reduce operational costs in buildings.
---

import nodeImage from '@site/static/img/node3/Energy.jpg';
import esp32 from '@site/static/img/components_images/ESP32.png';
import ina219 from '@site/static/img/components_images/INA219.jpg';
import blueTactile from '@site/static/img/components_images/Push_Button_Blue.jpg';
import yellowTactile from '@site/static/img/components_images/Push_Button_Yellow.jpg';
import cytron from '@site/static/img/components_images/Cytron_MD10C_Top_View.png';
import bulb from '@site/static/img/components_images/Incandescent_Bulb.jpg';
import dcMotor from '@site/static/img/components_images/DC_Motor.jpg';
import heater from '@site/static/img/components_images/2E2_10W_Resistor.jpg';
import lcd from '@site/static/img/components_images/LCD_2x16.png';
import relay from '@site/static/img/components_images/Relay.jpg';
import PinConnectionsTable from '@site/src/pages/PinConnectionsTable.js';
import circuitDiagram from '@site/static/img/node3/Energy_Management_System_Circuit_Diagram_bb.png';

# Node 3: Energy Management System

The Energy Management System, leverages the ESP32 microcontroller to monitor and control energy usage efficiently in buildings and industrial settings. It uses sensors to track power consumption and automates the management of energy resources to optimize usage and reduce costs, demonstrating the potential of smart systems to enhance sustainability and operational efficiency.

<img src={nodeImage} 
alt="Energy Management System" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto' }} />

## Components Summary

<div style={{ display: 'flex', justifyContent: 'center', margin: '20px' }}>
  <table style={{ width: '75%', borderCollapse: 'collapse' }}>
    <thead>
      <tr>
        <th style={{ padding: '8px', width: '30%', textAlign: 'center' }}>Component Type</th>
        <th style={{ padding: '8px', width: '70%', textAlign: 'center' }}>Component Name</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Controller</td>
        <td style={{ padding: '8px' }}>
          <a href="#controller-esp32-dev-board">ESP32 Dev Board</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Sensor</td>
        <td style={{ padding: '8px' }}>
          <a href="#sensor-ina219-dc-power-monitor-module">INA219 DC Power Monitor Module</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}></td>
        <td style={{ padding: '8px' }}>
          <a href="#sensor-momentary-tactile-push-button">Momentary Tactile Push Button</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Motor Driver</td>
        <td style={{ padding: '8px' }}>
          <a href="#motor-driver-cytron-md10c">Cytron MD10C</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Actuator</td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-incandescent-bulb">Incandescent Bulb</a>
        </td>
      </tr>
      <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-heater-power-resistor">Heater (Power Resistor)</a>
        </td>
      </tr>
      <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-dc-motor">DC Motor</a>
        </td>
      </tr>
            <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#display-lcd-16x2-character">LCD, 16x2 Character</a>
        </td>
      </tr>
      <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-relay">Relay</a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

## Components Overview

### Controller: ESP32 Dev Board

The ESP32 Dev Board is a powerhouse of functionality equipped for the Internet of Things (IoT). It houses a dual-core processor that provides ample computational capability for a vast array of applications, ranging from simple to complex multitasking environments. The board's connectivity suite, with Wi-Fi and Bluetooth capabilities, allows for easy integration into wireless networks and communication with other devices, making it a perfect fit for smart home applications, IoT devices, and advanced robotics.

<img src={esp32} 
alt="ESP32 Dev Board" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto' 
}} />

#### Technical Specifications and Features
- **Processor**: Dual-Core 32-bit LX6 microprocessor, up to 240 MHz clock frequency.
- **Memory**: 520 KB of SRAM, 448 KB of ROM.
- **Connectivity**: Wi-Fi 802.11 b/g/n, Bluetooth v4.2 with BLE.
- **I/O Pins**: 34 programmable GPIOs.
- **Analog**: 18-channel 12-bit SAR ADC, 2 channels of 8-bit DAC.
- **Communication Protocols**: 4 x SPI, 2 x I2C, 2 x I2S, 3 x UART.
- **Additional Peripherals**: Ethernet MAC, SD/SDIO/MMC host, LED PWM, Motor PWM.
- **Security**: Secure boot and flash encryption.
- **Cryptographic Hardware Acceleration**: AES, SHA-2, RSA, ECC, Random Number Generator.

#### Key Features
- **High Integration**: A single chip for both CPU and wireless functionalities.
- **Energy Efficient**: Advanced power management for battery operation.
- **Extensive GPIOs**: Offers flexibility for various use cases.
- **Robust IO Capabilities**: Multiple serial interfaces for peripherals.
- **Rich Community Support**: Extensive libraries and forums for development support.

#### References
- [ESP32 Datasheet](@site/static/datasheets/ESP32.pdf)
- [ESP32 Development Board Pinout](@site/static/datasheets/ESP32_DevBoard_Pinout.pdf)

### Sensor: INA219, DC Power Monitor Module

The INA219 is a high-precision DC power monitor module designed for meticulous power consumption analysis. Ideal for embedded systems, this module offers real-time current, voltage, and power measurement through shunt resistance with an I2C digital output. Handling up to ±3.2A and ±26V, the INA219 captures detailed readings with a resolution up to 12-bits. With its internal calibration, it guarantees precision across diverse applications. High-side monitoring allows it to be used in situations where ground disruption is not feasible, like battery-powered devices and energy monitoring systems. The compact SOT-23 packaging fits snugly in space-constrained projects, enhancing its appeal for power-critical applications.

<img src={ina219} 
alt="INA219 Module" 
style={{ 
    width: '50%', 
    display: 'block', 
    margin: '20px auto' }} />

#### Technical Specifications and Features
- **Accuracy**: Maximum error of ±1% over temperature.
- **Measurement Range**: Configurable up to ±3.2A and ±26V.
- **Interface**: I2C communication with programmable addresses.
- **Calibration**: Built-in calibration for improved accuracy.
- **Voltage Sensing**: 0 to 26V at the bus, 0 to 16V at the shunt.
- **Resolution**: 12-bit for current, power, and voltage measurements.
- **Package**: Small SOT-23 footprint.
- **Resistor Accuracy**: 0.1% for shunt resistor.
- **Power Reading**: Direct power readout in watts.
- **Energy Calculation**: Internal multiplier for direct energy calculation.
- **Multi-Device Reporting**: Supports shared bus voltage reporting.

#### Reference
- [INA219 Datasheet](@site/static/datasheets/ina219.pdf)
- [INA219 Module User Guide](@site/static/datasheets/ina219_manual.pdf)

### Sensor: Momentary Tactile Push Button

A momentary tactile push button is a fundamental electronic component used for temporary electrical connections in devices such as keyboards, remote controls, and control panels. It provides users with a tactile interface to trigger specific functions or actions by pressing and releasing the button. Known for their reliability and precision, these buttons offer tactile feedback or audible clicks upon activation. Available in various sizes and styles, they play a vital role in user interface design, enabling users to interact with electronic devices by initiating momentary electrical signals with a simple push.

<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>
    <img src={yellowTactile} 
         alt="Tactile - Yellow" 
         style={{ 
            width: '25%', 
            display: 'block', 
            margin: '20px auto' }} />

    <img src={blueTactile} 
         alt="Tactile - Blue" 
         style={{ 
            width: '25%', 
            display: 'block', 
            margin: '20px auto'  }} />
</div>

#### Technical Specifications and Features
- **Function**: Push to ON, momentary action.
- **Switch Type**: Momentary.
- **Mounting Type**: Through-hole.
- **Contact Material**: Aluminum alloy.
- **Contact Resistance**: 50mΩ.
- **Insulation Resistance**: 100MΩ.
- **Operating Temperature Range**: -20°C to +70°C.
- **Operation Force**: Approximately 3-5N.
- **Operation Stroke**: 1.05mm.
- **Body Material**: Plastic.
- **Mechanical & Electrical Life**: 300,000 cycles.
- **Dimensions**: 
  - Length: 12mm.
  - Width: 12mm.
  - Height: 7.3mm.
  - Weight: 2gm.

#### References
- [Momentary Tactile Push Button Datasheet](@site/static/datasheets/Momentary_Tactile_Push_Button.pdf)

### Motor Driver: Cytron MD10C

The Cytron MD10C is a single-motor drive module designed for controlling and powering DC motors with ease. It is widely used in robotics and automation projects due to its compact size and versatile features. The MD10C offers bi-directional control, allowing users to manage the motor's rotation in both forward and reverse directions effortlessly. Known for its robustness and protection features, including overcurrent protection and thermal shutdown, the MD10C ensures the safety of both the motor and the driver itself. With a voltage range typically suitable for 7V to 30V, it can accommodate various motor sizes and voltages, making it suitable for a wide range of applications.

<img src={cytron} 
    alt="Cytron MD10C" 
    style={{ 
        width: '75%', 
        display: 'block', 
        margin: '20px auto'  }} />
        
#### Technical Specifications and Features
- **Bi-directional Control**: For one DC brushed motor, single channel.
- **Voltage Range**: Supports motor voltage ranges from 5V to 30V.
- **Maximum Current**: Up to 13A continuous and 30A peak (for 10 seconds).
- **Logic Level Input**: Accepts 3.3V, 5V, 12V, and 24V logic level inputs, compatible with signals from Arduino, Raspberry Pi, PLC, and other controllers capable of producing PWM or logic signals from 3.3V to 30V.
- **Solid-state Components**: Provides faster response time and eliminates the wear and tear of mechanical relays.
- **NMOS H-Bridge**: Full NMOS H-Bridge for better efficiency; no heat sink required.
- **PWM Frequency**: Speed control PWM frequency up to 20KHz (output frequency is the same as the input frequency).
- **PWM Operation**: Supports both Locked-Antiphase and Sign-Magnitude PWM operation.
- **Power Source**: The new MD10C should be powered from a single power source, Vmotor only; no additional Vin is required.
- **Control Signal**: Supports TTL PWM from the microcontroller, not PWM from the RC receiver.
- **Dimensions**: 75mm x 43mm.

#### References
- [Cytron MD10C User Manual](@site/static/datasheets/Cytron_MD10C_Rev3.0_User_Manual.pdf)

### Actuator: Incandescent Bulb

An incandescent bulb, also known as an incandescent lamp, is a traditional and widely recognized type of lighting device. It produces light through the heating of a wire filament inside a glass bulb to a high temperature until it emits visible light. The incandescent bulb relies on the principle of incandescence, where the filament glows white-hot when an electric current passes through it.

<img src={bulb} 
    alt="Incandescent Bulb" 
    style={{ 
        width: '25%', 
        display: 'block', 
        margin: '20px auto',
        transform: 'rotate(90deg)'  }} />

#### Technical Specifications and Features
- **Supply Voltage**: 6V
- **Lamp Base Type**: Wedge
- **Bulb Size**: T-5
- **MSCP (Mean Spherical Candle Power)**: 12
- **Average Bulb Life**: 50 hours

#### References
- [Incandescent Bulb Datasheet](@site/static/datasheets/Incandescent_Bulb.pdf)

### Actuator: DC Motor

A DC (Direct Current) motor is an electrical device that transforms electrical energy into mechanical motion. It operates based on the interaction between a fixed magnetic field (created by the stator) and a moving conductor (the rotor) carrying an electrical current. When voltage is applied to the motor, it induces a magnetic force, causing the rotor to rotate. DC motors are valued for their controllability, allowing precise speed and direction adjustments through voltage variations. They find extensive use in a wide range of applications, including electric vehicles, industrial machinery, robotics, and consumer electronics, owing to their reliability and adaptability.

<img src={dcMotor} 
    alt="DC Motor" 
    style={{ 
        width: '40%', 
        display: 'block', 
        margin: '20px auto'  }} />

#### Technical Specifications and Features
- **Operating Voltage Range**: 3 ~ 9VDC
- **No-load Current**: 70 mA max
- **Loaded Current**: 200 mA max
- **Operating Temperature**: 50°C
- **Rated Speed**: 1000 RPM
- **Shaft Length**: 10mm
- **Shaft Diameter**: 2mm
- **Length**: 20mm
- **Width**: 16mm
- **Height**: 33mm
- **Approx Weight**: 15 gm

#### References
- [DC Toy Motor Datasheet](@site/static/datasheets/DC_Toy_Motor.pdf)

### Actuator: Heater (Power Resistor)

A power resistor used as a heater load is a component designed to convert electrical energy into heat. It accomplishes this by resisting the flow of electrical current, generating heat as a result. These resistors are employed in applications that require controlled and reliable heating, such as industrial ovens, temperature testing, and space heating. By choosing the appropriate power resistor with the desired resistance and power rating, users can precisely regulate the amount of heat produced. This simplicity, stability, and controllability make power resistors valuable for tasks where maintaining specific temperatures is critical. They serve as dependable and easily adjustable heat sources for various thermal processes.

<img src={heater} 
    alt="Heater (Power Resistor)" 
    style={{ 
        width: '50%', 
        display: 'block', 
        margin: '20px auto'  }} />

#### Technical Specifications and Features
- **Resistance**: 2.2 Ohm
- **Power Rating**: 10 Watts
- **Approximate Maximum Current**: 2.13 Amps
- **Pitch**: 1.5 inch

#### References
- [Power Resistor Datasheet](@site/static/datasheets/Power_Resistor.pdf)

### Display: LCD, 16x2 Character

A 16x2 character LCD (Liquid Crystal Display) is a common display module that can show up to 32 characters at once in a 16-column by 2-row format. These LCDs are widely used in electronics and embedded systems to display text-based information and numerical data. They are known for their simplicity of use and compatibility with microcontrollers, making them suitable for a range of applications. 16x2 LCDs are often used in digital thermometers, DIY electronics projects, home automation systems, and various consumer devices to provide users with clear and easily readable visual feedback and information displays.

<img src={lcd} 
    alt="16x2 character LCD" 
    style={{ 
        width: '75%', 
        display: 'block', 
        margin: '20px auto'  }} />

#### Technical Specifications and Features
- **Type**: Character
- **Display Format**: 16 x 2 characters
- **Built-in Controller**: ST 7066 (or equivalent)
- **Duty Cycle**: 1/16
- **Dot Matrix**: 5 x 8 dots including cursor
- **Power Supply**: +5 V
- **LED Driving**: Can be driven by pin 1, pin 2, or A and K

#### References
- [LCD 16x2 Character Datasheet](@site/static/datasheets/LCD_16x2.pdf)

### Actuator: Relay

<img src={relay} 
    alt="Relay" 
    style={{ 
        width: '60%', 
        display: 'block', 
        margin: '20px auto'  }} />

The 3V relay module is an electronic switch that operates at a low voltage of 3 volts, making it suitable for use in low-power circuits and microcontroller-based projects. It typically consists of a relay, driver circuitry, and input/output connectors. The relay serves as an electromechanical switch, capable of controlling higher voltage and current loads with a low-voltage signal. This module is commonly used to interface microcontrollers, Arduino boards, or other digital devices with appliances, lights, or other electrical loads. It simplifies the process of controlling high-power devices by allowing you to use a low-voltage signal to open or close the relay contacts, thereby turning the connected load on or off. The 3V relay module finds applications in home automation, robotics, and various electronic projects where remote or automated control of electrical devices is needed.

#### Technical Specifications and Features
- **Operate Voltage**: 3.3V-5V
- **Input Current**: 100mA
- **Rated Load**: 5A@250VAC, 5A@30VDC
- **Contact Resistance**: 50mΩ @6VDC 1A
- **Insulation Resistance**: 100MΩ 10ms Max.
- **Operation Time**: 10ms Max.
- **Release Time**: 5ms Max.
- **Input Interface**: Digital
- **Dimensions**: 42mm x 24mm x 18.5mm
- **Weight**: G.W 19g

#### References
- [Relay Datasheet](@site/static/datasheets/Relay.pdf)

## Communication Protocols

The system employs Wi-Fi for network connectivity and MQTT for messaging, facilitating seamless data flow between the node and the IoT platform.

## Conclusion

The Energy Management System node showcases practical applications of CPS in energy conservation. It stands as a testament to the potential of integrating technology with environmental responsibility.

## Annexure

- **ThingsBoard Dashboard**: [Energy Management System Dashboard](http://10.100.80.25:8090/dashboards/3d547020-43f0-11ee-8330-f7876252e120)
- **GitHub Repository**: [Energy Management System Codebase](https://github.com/akhilG05/ACPS-Lab/tree/c5d41e9640407cddc5aa294dab1958cc6404de9e/Nodes/Energy

## Pin Connections
This section provides details about the pin connections between the components used in the node and the ESP32 controller.

### ACS712 Module Pin Connections

<PinConnectionsTable
  data={[
    ["ACS712 Current Sensor", "", "ESP32 Dev Board"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["Signal Out", <span className="wire"><span className="wire-blue"></span></span>, "32"]
  ]}
/>

### Tactile Switch Pin Connections

<PinConnectionsTable
  data={[
    ["Bulb Tact Switch", "", "ESP32 Dev Board"],
    ["Leg-1", <span className="wire"><span className="wire-blue"></span></span>, "13"],
    ["Leg-3", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>
<br /><br />
<PinConnectionsTable
  data={[
    ["Heater Tact Switch", "", "ESP32 Dev Board"],
    ["Leg-1", <span className="wire"><span className="wire-blue"></span></span>, "19"],
    ["Leg-3", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>
<br /><br />
<PinConnectionsTable
  data={[
    ["Fan Tact Switch", "", "ESP32 Dev Board"],
    ["Leg-1", <span className="wire"><span className="wire-blue"></span></span>, "12"],
    ["Leg-3", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>

### Relay Module Pin Connections

<PinConnectionsTable
  data={[
    ["Bulb Relay", "", "ESP32 Dev Board"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["Signal In", <span className="wire"><span className="wire-blue"></span></span>, "2"]
  ]}
/>
<br /><br />
<PinConnectionsTable
  data={[
    ["Heater Relay", "", "ESP32 Dev Board"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["Signal In", <span className="wire"><span className="wire-blue"></span></span>, "4"]
  ]}
/>

### Cytron MD10C Motor Driver Pin Connections

<PinConnectionsTable
  data={[
    ["CYTRON MD10C Motor Driver", "", "ESP32 Dev Board"],
    ["DIR", <span className="wire"><span className="wire-blue"></span></span>, "5"],
    ["PWM", <span className="wire"><span className="wire-blue"></span></span>, "18"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>

### 16x2 character LCD Module Pin Connections

<PinConnectionsTable
  data={[
    ["16x2 character LCD", "", "ESP32 Dev Board"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "VIN"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["SCL", <span className="wire"><span className="wire-purple"></span></span>, "SCL"],
    ["SDA", <span className="wire"><span className="wire-orange"></span></span>, "SDA"]
  ]}
/>

## Circuit Diagram
<img src={circuitDiagram} 
alt="Circuit Diagram" 
style={{ 
    //maxWidth: '700px', 
    display: 'block', 
    margin: '20px auto' }} />

## Link to Code Explanation and Tutorial

For a comprehensive guide on programming this node, including detailed code explanations and step-by-step tutorials, please refer to the following link. This resource provides all necessary information to understand the functioning of the node, enabling users to effectively program and customize it according to their specific requirements.

[Visit the Node Programming Guide and Code Explanation](/docs/tutorial/node_code_explained.mdx)
