---
title: 'Node 8: Obstacle Detector'
description: Employs ultrasonic sensing to detect and alert to obstacles, critical for robotic and autonomous vehicle navigation.
---

import nodeImage from '@site/static/img/node8/Obstacle.jpg';
import esp32 from '@site/static/img/components_images/ESP32.png';
import ultrasonic from '@site/static/img/components_images/HC_SR04_Ultrasonic_Sensor.png';
import redLED from '@site/static/img/components_images/Red_LED.webp';
import buzzer from '@site/static/img/components_images/Buzzer.png';
import PinConnectionsTable from '@site/src/pages/PinConnectionsTable.js';
import circuitDiagram from '@site/static/img/node8/Obstacle_Detector_Circuit_Diagram_bb.png';

# Node 8: Obstacle Detector

This node utilizes an ESP32 to process signals from ultrasonic sensors for detecting obstacles, crucial for robotic navigation and automated vehicle systems. It helps prevent collisions and facilitates smooth operational pathways in complex environments, showcasing the integration of sensory data and machine response in real-time applications.

<img src={nodeImage} 
alt="Obstacle Detector" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto' }} />

## Components Summary

<div style={{ display: 'flex', justifyContent: 'center', margin: '20px' }}>
  <table style={{ width: '75%', borderCollapse: 'collapse' }}>
    <thead>
      <tr>
        <th style={{ padding: '8px', width: '30%', textAlign: 'center' }}>Component Type</th>
        <th style={{ padding: '8px', width: '70%', textAlign: 'center' }}>Component Name</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Controller</td>
        <td style={{ padding: '8px' }}>
          <a href="#controller-esp32-dev-board">ESP32 Dev Board</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Sensor</td>
        <td style={{ padding: '8px' }}>
          <a href="#sensor-hc-sr04-ultrasonic-distance-sensor">Ultrasonic Sensor (HC-SR04)</a>
        </td>
      </tr>
      <tr>
        <td style={{ padding: '8px', textAlign: 'right' }}>Actuator</td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-buzzer">Buzzer</a>
        </td>
      </tr>
      <tr>
        <td></td>
        <td style={{ padding: '8px' }}>
          <a href="#actuator-led">Red LED</a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

## Components Overview

### Controller: ESP32 Dev Board

The ESP32 Dev Board is a powerhouse of functionality equipped for the Internet of Things (IoT). It houses a dual-core processor that provides ample computational capability for a vast array of applications, ranging from simple to complex multitasking environments. The board's connectivity suite, with Wi-Fi and Bluetooth capabilities, allows for easy integration into wireless networks and communication with other devices, making it a perfect fit for smart home applications, IoT devices, and advanced robotics.

<img src={esp32} 
alt="ESP32 Dev Board" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto' 
}} />

#### Technical Specifications and Features
- **Processor**: Dual-Core 32-bit LX6 microprocessor, up to 240 MHz clock frequency.
- **Memory**: 520 KB of SRAM, 448 KB of ROM.
- **Connectivity**: Wi-Fi 802.11 b/g/n, Bluetooth v4.2 with BLE.
- **I/O Pins**: 34 programmable GPIOs.
- **Analog**: 18-channel 12-bit SAR ADC, 2 channels of 8-bit DAC.
- **Communication Protocols**: 4 x SPI, 2 x I2C, 2 x I2S, 3 x UART.
- **Additional Peripherals**: Ethernet MAC, SD/SDIO/MMC host, LED PWM, Motor PWM.
- **Security**: Secure boot and flash encryption.
- **Cryptographic Hardware Acceleration**: AES, SHA-2, RSA, ECC, Random Number Generator.

#### Key Features
- **High Integration**: A single chip for both CPU and wireless functionalities.
- **Energy Efficient**: Advanced power management for battery operation.
- **Extensive GPIOs**: Offers flexibility for various use cases.
- **Robust IO Capabilities**: Multiple serial interfaces for peripherals.
- **Rich Community Support**: Extensive libraries and forums for development support.

#### References
- [ESP32 Datasheet](@site/static/datasheets/ESP32.pdf)
- [ESP32 Development Board Pinout](@site/static/datasheets/ESP32_DevBoard_Pinout.pdf)

### Sensor: HC-SR04 Ultrasonic Distance Sensor

The HC-SR04 Ultrasonic Distance Sensor is a popular and affordable module used for measuring distances in various applications. It operates on the principle of sending and receiving ultrasonic waves. The sensor emits a high-frequency sound pulse and measures the time it takes for the pulse to bounce off an object and return to the sensor. By calculating the time elapsed, it can accurately determine the distance to the object. The HC-SR04 is known for its reliability and ease of use, making it a common choice for robotics, automation, and distance measurement projects. It typically offers a range of 2 to 400 centimeters with high accuracy, and its simple interface allows it to be easily integrated into microcontroller-based systems.

<img src={ultrasonic} 
alt="HC-SR04 Ultrasonic Distance Sensor" 
style={{ 
    width: '75%', 
    display: 'block', 
    margin: '20px auto' 
}} />

#### Technical Specifications and Features:
- **Working Voltage**: DC 5 V
- **Working Current**: 15mA
- **Working Frequency**: 40Hz
- **Max Range**: 4m
- **Min Range**: 2cm
- **Measuring Angle**: 15 degrees
- **Trigger Input Signal**: 10uS TTL pulse
- **Echo Output Signal**: Input TTL level signal and the range in proportion
- **Dimension**: 45*20*15mm

#### References:
- [HC-SR04 Datasheet](@site/static/datasheets/HCSR04.pdf)

### Actuator: LED

LEDs, or Light Emitting Diodes, are semiconductor devices that emit light when an electric current is applied. Known for their energy efficiency, compact size, and long life, LEDs are extensively used across various applications including electronic devices, display panels, indicators, and general lighting. Their ability to be manufactured in various colors and sizes makes LEDs exceptionally versatile for design and functional purposes in numerous projects.

<img src={redLED} 
      alt="Red LED" 
      style={{ 
        width: '25%', 
        display: 'block', 
        margin: '20px auto'  }} />

#### Technical Specifications and Features
- **Dice Material**: Gallium Arsenide Phosphide on Gallium Phosphide (GaAsP on GaP/GaP).
- **Emitted Colors**: Available in Green and Red.
- **Lens Color**: Green Diffused and Red Diffused.
- **Peak Wavelength**:
  - Green: 568 nm
  - Red: 587 nm
- **Viewing Angle**: 45 degrees, offering focused illumination.
- **Luminous Intensity (IV)**:
  - Green: 15 mcd
  - Red: 14 mcd

#### References
- [Red LED Datasheet](@site/static/datasheets/Red_LED.pdf)

### Actuator: Buzzer

A passive piezoelectric buzzer utilizes a piezoelectric crystal or ceramic element to create sound. When alternating voltage is applied, the piezoelectric element undergoes rapid expansion and contraction, which generates vibrations. These vibrations produce sound waves, creating audible noise. This type of buzzer is commonly used in alarms, timers, and user interface feedback due to its simplicity and effectiveness.

<img src={buzzer} 
alt="Buzzer" 
style={{ 
    width: '60%', 
    display: 'block', 
    margin: '20px auto'  }} />

#### Technical Specifications and Features
- **Input Voltage (Max.)**: 5V
- **Resistance**: 42 Î©
- **Resonance Frequency**: 2048 Hz
- **Body Size**: 12mm x 8mm
- **Pin Pitch**: 6mm
- **External Material**: Plastic
- **Color**: Black

#### References
- [5V Passive Buzzer Datasheet](@site/static/datasheets/Passive_Buzzer.pdf)

## Communication Protocols

### Controller Communication

The communication between the ESP32 controller and the ThingsBoard server involves two key protocols: Wi-Fi and MQTT.

#### Wi-Fi Connection:
The ESP32 controller connects to a local Wi-Fi network, enabling it to access the internet. This connection provides the foundation for communication with external services like the ThingsBoard server.

#### MQTT Protocol:
The Message Queuing Telemetry Transport (MQTT) protocol is employed for transmitting data between the controller and the ThingsBoard server. MQTT is a lightweight and efficient protocol designed for remote devices with limited resources. It facilitates the publication of data (such as access events) from the controller to the server, as well as the subscription to commands or acknowledgements from the server. MQTT ensures secure and reliable communication, making it ideal for real-time data visualization and monitoring on the ThingsBoard dashboard. The controller publishes messages related to access events, which are then visualized on the dashboard, offering insights into the system's performance and access patterns.

### Sensor Communication

In the node, the HC-SR04 ultrasonic distance sensor communicates with the ESP32 controller using a dedicated communication protocol.

#### ULTRASONIC SENSOR COMMUNICATION

The HC-SR04 ultrasonic distance sensor employs a straightforward and efficient communication mechanism. It emits high-frequency sound waves (ultrasonic pulses) and measures the time it takes for these pulses to bounce off an object and return to the sensor. This time measurement allows the sensor to calculate the distance between itself and the object with high accuracy. The sensor provides this distance information to the ESP32 controller, which interprets the data and triggers appropriate responses when the object's distance falls below a predefined threshold. This communication method ensures timely and accurate obstacle detection, making it suitable for a wide range of applications, from security systems to industrial automation.

## Pin Connections
This section provides details about the pin connections between the components used in the node and the ESP32 controller.

### HC-SR04 Module Pin Connections

<PinConnectionsTable
  data={[
    ["HC-SR04 Ultrasonic Sensor", "", "ESP32 Dev Board"],
    ["VCC", <span className="wire"><span className="wire-red"></span></span>, "3.3V"],
    ["GND", <span className="wire"><span className="wire-black"></span></span>, "GND"],
    ["Trig", <span className="wire"><span className="wire-blue"></span></span>, "5"],
    ["Echo", <span className="wire"><span className="wire-blue"></span></span>, "18"]
  ]}
/>

### Red LED Pin Connections

<PinConnectionsTable
  data={[
    ["Red LED", "", "ESP32 Dev Board"],
    ["Anode (+)", <span className="wire"><span className="wire-blue"></span></span>, "21"],
    ["Cathode (-)", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>

### Buzzer Pin Connections

<PinConnectionsTable
  data={[
    ["Buzzer", "", "ESP32 Dev Board"],
    ["Positive (+)", <span className="wire"><span className="wire-blue"></span></span>, "19"],
    ["Negative (-)", <span className="wire"><span className="wire-black"></span></span>, "GND"]
  ]}
/>

## Circuit Diagram
<img src={circuitDiagram} 
alt="Circuit Diagram" 
style={{ 
    //maxWidth: '700px', 
    display: 'block', 
    margin: '20px auto' }} />

## Link to Code Explanation and Tutorial

For a comprehensive guide on programming this node, including detailed code explanations and step-by-step tutorials, please refer to the following link. This resource provides all necessary information to understand the functioning of the node, enabling users to effectively program and customize it according to their specific requirements.

[Visit the Node Programming Guide and Code Explanation](/docs/tutorial/node_code_explained.mdx)
